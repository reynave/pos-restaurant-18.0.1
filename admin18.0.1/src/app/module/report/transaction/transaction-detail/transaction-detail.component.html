<div class="header py-2 sticky-top bg-white">
   <div class="row">
      <div class="col-1 d-grid">
         <button (click)="back()" class="btn btn-sm btn-light border">BACK</button>
      </div>
      <div class="col-5 align-self-center">
         <strong>TRANSACTION {{id}}</strong>
         <span class="mx-1" *ngIf="loading">
            <img src="./gif/Pulse@1x-1.0s-200px-200px.gif" height="30">
         </span>
      </div>
      <div class="col-6 text-end">
         @if(header.void == 1){
         <div class="btn btn-sm btn-danger me-1">
            VOID BILL
         </div>
         }

      </div>
   </div>

</div>
<div class="row">
   <div class="col-6">

      <table class="table table-sm">
         <tbody>
            <tr>
               <Td>Date </Td>
               <Td>: {{header.startDate | date:'YYYY-MMM-dd' }}</Td>
            </tr>
            <tr>
               <Td>Start Time </Td>
               <Td>: {{header.startDate | date : 'HH:mm:ss'}}</Td>
            </tr>
            <tr>
               <Td>End Time </Td>
               <Td>: {{header.endDate | date : 'HH:mm:ss' }}</Td>
            </tr>
            <tr>
               <Td>Employee </Td>
               <Td>: {{header.inputBy }}</Td>
            </tr>
         </tbody>
      </table>
   </div>

   <div class="col-6">
      <table class="table table-sm">
         <tbody>
            <tr>
               <Td>Total Item</Td>
               <Td>: {{header.totalItem | number}}</Td>
            </tr>
            <tr>
               <Td>Outlet</Td>
               <Td>: {{header.outlet}}</Td>
            </tr>
            <tr>
               <Td>Daily Check</Td>
               <Td>: {{header.dailyCheckId}}</Td>
            </tr>
            <tr>
               <Td>void </Td>
               <Td>: @if(header.void == 1){
                  <span class="badge text-bg-danger">VOID </span>
                  }
               </Td>
            </tr>

         </tbody>
      </table>
   </div>
</div>


<div class=" border mb-3">
   <table class="table table-sm table-report table-hover" style="width: 100%;">
      <thead>
         <tr>
            <th width="30px"></th>
            <th width="30px">#</th>
            <th width="50px" class="text-end">Qty</th>
            <th>Name Item</th>
            <th>category</th>
            <th>department</th>
            <th class="text-end">Total Amount</th>

            <th>void</th>
         </tr>
      </thead>
      <tbody *ngFor="let x of items; let i = index" [class]="{'tr-danger' :  x.void == 1 }">
         <tr [class]="{'tr-bold':x.checkbox == 1}" (click)="x.checkbox == 0 ? x.checkbox = 1: x.checkbox =0">
            <td> @if(x.checkbox == 0){
               <i class="bi bi-folder-fill"></i>
               }
               @else {
  <i class="bi bi-folder2-open"></i>
               }
             
            </td>
            <td>{{x.no}}</td>
            <td class="text-end">{{x.qty | number}}</td>
            <td>{{x.name}}</td>
            <td>{{x.category }}</td>
            <td>{{x.department }}</td>

            <td class="text-end">{{x.total | number}}</td>
            <td><span *ngIf="x.void == 1" class="badge text-bg-danger">VOID</span></td>
         </tr>
         @if(x.checkbox == 1){
         <tr *ngFor="let j of x.modifier; let n = index" [class]="{'tr-danger' :  x.void == 1 }">
            <td></td>
            <Td></Td>
            <td class="text-end">{{j.qty | number}}</td>

            <td>{{j.name}}</td>
            <td> </td>
            <td> </td>

            <td class="text-end">
               <div class="me-2">
                  {{j.totalPrice | number}}
               </div>
            </td>
            <td>
               <span *ngIf="j.void == 1" class="badge text-bg-danger">VOID</span>
            </td>
         </tr>
         }
      </tbody>
   </table>

</div>

<div class="row">
   <div class="col-md-5 col-12 ">
      <table class="table table-sm">
         <tbody>
            <tr *ngFor="let item of modifier">
               <td>{{item.name}}</td>
               <td width="5px">:</td>
               <td class="text-end"> {{item.total | number}}</td>
            </tr>
            <tr>
               <Td>Total Amount</Td>
               <td>:</td>
               <td class="text-end"> {{header.totalAmount | number}}</td>
            </tr>
            <tr>
               <td colspan="3"></td>
            </tr>
            <tr *ngFor="let item of discount">
               <td>{{item.name}}</td>
               <td>:</td>
               <td class="text-end"> {{item.total | number}}</td>
            </tr>
            <tr *ngFor="let item of sc">
               <td>{{item.name}}</td>
               <td>:</td>
               <td class="text-end"> {{item.total | number}}</td>
            </tr>
            <tr *ngFor="let item of tax">
               <td>{{item.name}}</td>
               <td>:</td>
               <td class="text-end"> {{item.total | number}}</td>
            </tr>


            <tr>
               <Td>Grand Total</Td>
               <td>:</td>
               <td class="text-end"> {{header.grandTotal | number}}</td>
            </tr>
            <tr>
               <td colspan="3"></td>
            </tr>
            <tr>
               <Td colspan="3">Payment</Td>
            </tr>
            <tr *ngFor="let item of payment">
               <Td>
                  <div class="ms-3">{{item.name}}</div>
               </Td>
               <td>:</td>
               <td class="text-end"> {{item.paid | number}}</td>
            </tr>
            <tr>
               <Td>Change </Td>
               <td>:</td>
               <td class="text-end">{{header.changePayment | number}}</td>
            </tr>
            <tr>
               <Td>Tips</Td>
               <td>:</td>
               <td class="text-end">{{header.tips | number}}</td>
            </tr>
         </tbody>
      </table>
   </div>
</div>