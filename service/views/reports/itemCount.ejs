<%- include('./global/header') %>

<%
  var reportData = report || {};
  var departments = Array.isArray(reportData.data) ? reportData.data : [];

  var formatNumber = function(value) {
    return Number(value || 0).toLocaleString('id-ID');
  };
%>

<% if (departments.length) { %>
  <% departments.forEach(function(dept, idx) { %>
    <section style="margin-top:20px;">
      <h2 style="margin-bottom:6px;">(<%= idx + 1 %>) <%= dept.menuDepartment || 'Unknown Department' %></h2>

      <% if (dept.items && dept.items.length) { %>
        <table class="table table-sm">
          <thead>
            <tr>
              <th style="width:40px;">No</th>
              <th>Nama Item</th>
              <th style="width:120px;">Qty</th> 
            </tr>
          </thead>
          <tbody>
            <% dept.items.forEach(function(item, itemIdx) { %>
              <tr>
                <td><%= itemIdx + 1 %></td>
                <td><%= item.name %></td>
                <td><%= formatNumber(item.qty) %></td> 
              </tr>
            <% }); %>
          </tbody>
        </table>
      <% } else { %>
        <p>Tidak ada item dalam departemen ini.</p>
      <% } %>
    </section>
  <% }); %>
<% } else { %>
  <p>Tidak ada data untuk ditampilkan.</p>
<% } %>

<%- include('./global/footer') %>
